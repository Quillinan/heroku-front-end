{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Milton\\\\Desktop\\\\DEPLOY\\\\CRUD\\\\React\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Milton\\\\Desktop\\\\DEPLOY\\\\CRUD\\\\React\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Milton\\\\Desktop\\\\DEPLOY\\\\CRUD\\\\React\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{Table,Button}from'react-bootstrap';import api from'../../services/api';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Produtos=function Produtos(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),produtos=_useState2[0],setProdutos=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(5),_useState6=_slicedToArray(_useState5,1),produtoPerPage=_useState6[0];useEffect(function(){loadProdutos();},[]);// Função que carrega os produtos da api\nfunction loadProdutos(){return _loadProdutos.apply(this,arguments);}//Função que apaga os produtos da api\nfunction _loadProdutos(){_loadProdutos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.get('/produtos');case 2:response=_context.sent;setProdutos(response.data);console.log(response.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return _loadProdutos.apply(this,arguments);}function removeProduto(_x){return _removeProduto.apply(this,arguments);}// Formatação da data\nfunction _removeProduto(){_removeProduto=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.delete(\"/produtos/\".concat(id));case 2:loadProdutos();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _removeProduto.apply(this,arguments);}function formateDate(date){return moment(date).format('DD/MM/YYYY');}// Formatação do preço\nfunction formatePrice(price){return price.toLocaleString('pt-br',{style:'currency',currency:'BRL'});}//Função que edita os produtos da api\nfunction editProduto(id){history.push(\"/produtos_cadastro/\".concat(id));}//Função que direciona para a info do produto com id\nfunction viewProduto(id){history.push(\"/produtos/\".concat(id));}var paginate=function paginate(pageNumber){return setCurrentPage(pageNumber);};var indexOfLastProduto=currentPage*produtoPerPage;var indexOfFirstProduto=indexOfLastProduto-produtoPerPage;var currentProduto=produtos.slice(indexOfFirstProduto,indexOfLastProduto);var totalProdutos=produtos.length;var pageNumbers=[];for(var i=1;i<=Math.ceil(totalProdutos/produtoPerPage);i++){pageNumbers.push(i);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\" Lista de produtos \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",className:\"text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nome\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pre\\xE7o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Data de cria\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\xDAltima atualiza\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentProduto.map(function(produto){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:produto.id}),/*#__PURE__*/_jsx(\"td\",{children:produto.name}),/*#__PURE__*/_jsx(\"td\",{children:formatePrice(produto.price)}),/*#__PURE__*/_jsx(\"td\",{children:formateDate(produto.created_at)}),/*#__PURE__*/_jsx(\"td\",{children:formateDate(produto.updated_at)}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",onClick:function onClick(){return viewProduto(produto.id);},variant:\"info\",children:\"Ver\"}),' ',/*#__PURE__*/_jsx(Button,{size:\"sm\",onClick:function onClick(){return editProduto(produto.id);},children:\"Editar\"}),' ',/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"danger\",onClick:function onClick(){return removeProduto(produto.id);},children:\"Apagar\"}),' ']})]});})})]}),/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsx(\"ul\",{className:\"pagination\",children:pageNumbers.map(function(number){return/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return paginate(number);},className:\"page-link\",children:number})},number);})})})]})});};export default Produtos;","map":{"version":3,"sources":["C:/Users/Milton/Desktop/DEPLOY/CRUD/React/src/pages/Produtos/index.tsx"],"names":["React","useState","useEffect","useHistory","Table","Button","api","moment","Produtos","history","produtos","setProdutos","currentPage","setCurrentPage","produtoPerPage","loadProdutos","get","response","data","console","log","removeProduto","id","delete","formateDate","date","format","formatePrice","price","toLocaleString","style","currency","editProduto","push","viewProduto","paginate","pageNumber","indexOfLastProduto","indexOfFirstProduto","currentProduto","slice","totalProdutos","length","pageNumbers","i","Math","ceil","map","produto","name","created_at","updated_at","number"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Table, Button } from 'react-bootstrap';\r\nimport api from '../../services/api';\r\n\r\nimport moment from 'moment';\r\n\r\ninterface IProduto {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  created_at: Date;\r\n  updated_at: Date;\r\n}\r\n\r\nconst Produtos: React.FC = () => {\r\n  const history = useHistory();\r\n  const [produtos, setProdutos] = useState<IProduto[]>([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [produtoPerPage] = useState(5);\r\n\r\n  useEffect(() => {\r\n    loadProdutos();\r\n  }, []);\r\n\r\n  // Função que carrega os produtos da api\r\n  async function loadProdutos() {\r\n    const response = await api.get('/produtos');\r\n    setProdutos(response.data);\r\n    console.log(response.data);\r\n  }\r\n\r\n  //Função que apaga os produtos da api\r\n  async function removeProduto(id: number) {\r\n    await api.delete(`/produtos/${id}`);\r\n    loadProdutos();\r\n  }\r\n\r\n  // Formatação da data\r\n  function formateDate(date: Date) {\r\n    return moment(date).format('DD/MM/YYYY');\r\n  }\r\n\r\n  // Formatação do preço\r\n  function formatePrice(price: Number) {\r\n    return price.toLocaleString('pt-br', {\r\n      style: 'currency',\r\n      currency: 'BRL',\r\n    });\r\n  }\r\n\r\n  //Função que edita os produtos da api\r\n  function editProduto(id: number) {\r\n    history.push(`/produtos_cadastro/${id}`);\r\n  }\r\n\r\n  //Função que direciona para a info do produto com id\r\n  function viewProduto(id: number) {\r\n    history.push(`/produtos/${id}`);\r\n  }\r\n\r\n  const paginate = (pageNumber: React.SetStateAction<number>) =>\r\n    setCurrentPage(pageNumber);\r\n  const indexOfLastProduto = currentPage * produtoPerPage;\r\n  const indexOfFirstProduto = indexOfLastProduto - produtoPerPage;\r\n  const currentProduto = produtos.slice(\r\n    indexOfFirstProduto,\r\n    indexOfLastProduto\r\n  );\r\n  const totalProdutos = produtos.length;\r\n  const pageNumbers = [];\r\n\r\n  for (let i = 1; i <= Math.ceil(totalProdutos / produtoPerPage); i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"text-center\">\r\n        <br />\r\n        <h1> Lista de produtos </h1>\r\n        <br />\r\n        <Table striped bordered hover variant=\"dark\" className=\"text-center\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Nome</th>\r\n              <th>Preço</th>\r\n              <th>Data de criação</th>\r\n              <th>Última atualização</th>\r\n              <th>Ações</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {currentProduto.map((produto) => (\r\n              <tr>\r\n                <td>{produto.id}</td>\r\n                <td>{produto.name}</td>\r\n                <td>{formatePrice(produto.price)}</td>\r\n                <td>{formateDate(produto.created_at)}</td>\r\n                <td>{formateDate(produto.updated_at)}</td>\r\n                <td>\r\n                  <Button\r\n                    size=\"sm\"\r\n                    onClick={() => viewProduto(produto.id)}\r\n                    variant=\"info\"\r\n                  >\r\n                    Ver\r\n                  </Button>{' '}\r\n                  <Button size=\"sm\" onClick={() => editProduto(produto.id)}>\r\n                    Editar\r\n                  </Button>{' '}\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"danger\"\r\n                    onClick={() => removeProduto(produto.id)}\r\n                  >\r\n                    Apagar\r\n                  </Button>{' '}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n        <nav>\r\n          <ul className=\"pagination\">\r\n            {pageNumbers.map((number) => (\r\n              <li key={number} className=\"page-item\">\r\n                <a onClick={() => paginate(number)} className=\"page-link\">\r\n                  {number}\r\n                </a>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Produtos;\r\n"]},"metadata":{},"sourceType":"module"}