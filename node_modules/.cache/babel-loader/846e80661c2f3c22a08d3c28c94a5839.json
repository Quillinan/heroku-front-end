{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Milton\\\\Desktop\\\\DEPLOY\\\\CRUD\\\\React\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _defineProperty from\"C:\\\\Users\\\\Milton\\\\Desktop\\\\DEPLOY\\\\CRUD\\\\React\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\defineProperty.js\";import _objectSpread from\"C:\\\\Users\\\\Milton\\\\Desktop\\\\DEPLOY\\\\CRUD\\\\React\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\Milton\\\\Desktop\\\\DEPLOY\\\\CRUD\\\\React\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Milton\\\\Desktop\\\\DEPLOY\\\\CRUD\\\\React\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from'react';import{useHistory,useParams}from'react-router-dom';import{Form,Button}from'react-bootstrap';import api from'../../../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Produtos=function Produtos(){var history=useHistory();var _useParams=useParams(),id=_useParams.id;var _useState=useState({name:'',price:0}),_useState2=_slicedToArray(_useState,2),model=_useState2[0],setModel=_useState2[1];useEffect(function(){if(id!==undefined){findProduto(id);}},[id]);// Função para edição de produto\nfunction updatedModel(e){setModel(_objectSpread(_objectSpread({},model),{},_defineProperty({},e.target.name,e.target.value)));}// Função de volta na navegação\nfunction back(){history.goBack();}// Limpa ip do console da página\nfunction onSubmit(_x){return _onSubmit.apply(this,arguments);}// Função que chama todos os produtos da api\nfunction _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response,_response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(id!==undefined)){_context.next=7;break;}_context.next=4;return api.put(\"produtos/\".concat(id),model);case 4:response=_context.sent;_context.next=10;break;case 7:_context.next=9;return api.post('/produtos',model);case 9:_response=_context.sent;case 10:back();case 11:case\"end\":return _context.stop();}}},_callee);}));return _onSubmit.apply(this,arguments);}function findProduto(_x2){return _findProduto.apply(this,arguments);}function _findProduto(){_findProduto=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.get(\"produtos/\".concat(id));case 2:response=_context2.sent;setModel({name:response.data.name,price:response.data.price});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _findProduto.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\" Cadastre o seu produtos \"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nome\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"name\",value:model.name,onChange:function onChange(e){return updatedModel(e);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Pre\\xE7o\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",name:\"price\",value:model.price,onChange:function onChange(e){return updatedModel(e);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"success\",type:\"submit\",active:true,children:\"Enviar\"})]})})]});};export default Produtos;","map":{"version":3,"sources":["C:/Users/Milton/Desktop/DEPLOY/CRUD/React/src/pages/Produtos/Form/index.tsx"],"names":["React","useState","useEffect","useHistory","useParams","Form","Button","api","Produtos","history","id","name","price","model","setModel","undefined","findProduto","updatedModel","e","target","value","back","goBack","onSubmit","preventDefault","put","response","post","get","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, ChangeEvent } from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport api from '../../../services/api';\r\n\r\ninterface IProduto {\r\n  name: string;\r\n  price: number;\r\n}\r\n\r\nconst Produtos: React.FC = () => {\r\n  const history = useHistory();\r\n  let { id } = useParams<{ id: string }>();\r\n  const [model, setModel] = useState<IProduto>({\r\n    name: '',\r\n    price: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (id !== undefined) {\r\n      findProduto(id);\r\n    }\r\n  }, [id]);\r\n\r\n  // Função para edição de produto\r\n  function updatedModel(e: ChangeEvent<HTMLInputElement>) {\r\n    setModel({\r\n      ...model,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  }\r\n\r\n  // Função de volta na navegação\r\n  function back() {\r\n    history.goBack();\r\n  }\r\n\r\n  // Limpa ip do console da página\r\n  async function onSubmit(e: ChangeEvent<HTMLFormElement>) {\r\n    e.preventDefault();\r\n\r\n    if (id !== undefined) {\r\n      const response = await api.put(`produtos/${id}`, model);\r\n    } else {\r\n      const response = await api.post('/produtos', model);\r\n    }\r\n    back();\r\n  }\r\n\r\n  // Função que chama todos os produtos da api\r\n  async function findProduto(id: string) {\r\n    const response = await api.get(`produtos/${id}`);\r\n    setModel({\r\n      name: response.data.name,\r\n      price: response.data.price,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"text-center\">\r\n        <br />\r\n        <h1> Cadastre o seu produtos </h1>\r\n        <br />\r\n      </div>\r\n      <div className=\"container\">\r\n        <Form onSubmit={onSubmit}>\r\n          <Form.Group>\r\n            <Form.Label>Nome</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={model.name}\r\n              onChange={(e: ChangeEvent<HTMLInputElement>) => updatedModel(e)}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Label>Preço</Form.Label>\r\n            <Form.Control\r\n              type=\"number\"\r\n              name=\"price\"\r\n              value={model.price}\r\n              onChange={(e: ChangeEvent<HTMLInputElement>) => updatedModel(e)}\r\n            />\r\n          </Form.Group>\r\n          <br />\r\n          <Button variant=\"success\" type=\"submit\" active>\r\n            Enviar\r\n          </Button>\r\n        </Form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Produtos;\r\n"]},"metadata":{},"sourceType":"module"}